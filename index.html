<!DOCTYPE html>
<html lang="id">

<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cek Budget Fasus</title>

<style>

body{
margin:0;
font-family:Arial;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
color:white;
overflow:hidden;
}

.background{
position:fixed;
width:100%;
height:100%;
background:url("background.jpg") center/cover no-repeat;
z-index:-2;
}

.overlay{
position:fixed;
width:100%;
height:100%;
background:rgba(0,0,0,0.65);
z-index:-1;
}

.container{
text-align:center;
position:relative;
}

.title{
font-size:48px;
font-weight:bold;
margin-bottom:25px;
}

.search-box{
position:relative;
display:inline-block;
}

input{
padding:14px;
font-size:18px;
width:320px;
border:none;
border-radius:6px;
}

button{
padding:14px 24px;
font-size:18px;
background:#FFD100;
border:none;
border-radius:6px;
cursor:pointer;
font-weight:bold;
margin-left:10px;
}

button:hover{
background:#e6bc00;
}

.suggest{
position:absolute;
top:50px;
width:320px;
background:white;
color:black;
border-radius:6px;
max-height:200px;
overflow-y:auto;
display:none;
z-index:5;
text-align:left;
}

.suggest div{
padding:10px;
cursor:pointer;
}

.suggest div:hover{
background:#FFD100;
}

.spinner{
display:none;
margin-top:20px;
}

.loader{
border:6px solid #333;
border-top:6px solid #FFD100;
border-radius:50%;
width:40px;
height:40px;
animation:spin 1s linear infinite;
margin:auto;
}

@keyframes spin{
0%{transform:rotate(0deg);}
100%{transform:rotate(360deg);}
}

</style>

</head>

<body>

<div class="background"></div>
<div class="overlay"></div>

<div class="container">

<div class="title">
CEK BUDGET FASUS
</div>

<div class="search-box">

<input
id="fasusInput"
placeholder="Masukkan nama fasus"
oninput="showSuggest()"
onkeypress="if(event.key==='Enter') openDashboard(this.value)"
autocomplete="off"
>

<div id="suggestBox" class="suggest"></div>

</div>

<button onclick="openDashboard(document.getElementById('fasusInput').value)">
Check
</button>

<div class="spinner" id="spinner">
<div class="loader"></div>
</div>

</div>

<script>

/* GANTI DENGAN ID GOOGLE SHEETS ANDA */
const sheetID =
"2PACX-1vTbJYRkPPTPDYHrDTy-eA_e5rUZ_VowdvBDjHU0BD7rKTvHIZfZAQf_ctl8qDkpiGYVnr9qARdX4fZ6";

const url =
"https://docs.google.com/spreadsheets/d/e/" +
sheetID +
"/pub?output=csv";

let fasusList = [];

fetch(url)
.then(res=>res.text())
.then(text=>{

const rows =
text.split("\n");

for(let i=1;i<rows.length;i++){

const cols =
rows[i].split(",");

if(cols[0])
fasusList.push(cols[0].trim());

}

});

function showSuggest(){

const input =
document.getElementById("fasusInput").value.toLowerCase();

const box =
document.getElementById("suggestBox");

box.innerHTML="";

if(!input){

box.style.display="none";
return;

}

const filtered =
fasusList.filter(f =>
f.toLowerCase().includes(input)
);

filtered.forEach(f=>{

const div =
document.createElement("div");

div.innerText=f;

div.onclick=()=>{
openDashboard(f);
};

box.appendChild(div);

});

box.style.display=
filtered.length ? "block":"none";

}

function openDashboard(fasus){

if(!fasus){

alert("Masukkan nama fasus");
return;

}

document.getElementById("spinner").style.display="block";

window.location.href =
"fasus-dashboard.html?fasus=" +
encodeURIComponent(fasus);

}

</script>

</body>
</html>
